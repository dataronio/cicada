#!/usr/bin/env bash

d () {
    sbt doc
    now switch xieyuheng
    now -n cicada target/scala-2.12/api/
}

t () {
    rm -f target/universal/stage/bin/*
    sbt stage
    r
}

r () {
    for FILE in $(find . | grep "^\./target/universal/stage/bin/" | grep "test$")
    do
        echo ""
        echo "[testing] $FILE"
        if ! time $FILE
        then
            exit 1
        fi
    done
}

main () {
    for TASK in $@
    do
        $TASK
    done
}

main $@
